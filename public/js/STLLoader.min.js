THREE.STLTranser=function(){};THREE.STLTranser.prototype.post=function(e,r){var t=document.createElement("form");t.action=e;t.method="post";t.style.display="none";for(var a in r){var n=document.createElement("textarea");n.name=a;n.value=r[a];t.appendChild(n)}document.body.appendChild(t);t.submit();return t};THREE.STLTranser.prototype.trans2STL=function(e){if(e instanceof THREE.BufferGeometry==false&&e instanceof THREE.Geometry==false){console.error("not an instance of THREE.BufferGeometry or THREE.Geometry.",e);return}if(e.faces){var r=e.vertices;var t=e.faces;var a="solid Test_Model\n";for(var n in t){a=a+"  facet normal "+t[n].normal.x+" "+t[n].normal.y+" "+t[n].normal.z+"\n";a=a+"    outer loop\n";var o=t[n].a;var s=t[n].b;var l=t[n].c;a=a+"      vertex "+r[o].x+" "+r[o].y+" "+r[o].z+"\n"+"      vertex "+r[s].x+" "+r[s].y+" "+r[s].z+"\n"+"      vertex "+r[l].x+" "+r[l].y+" "+r[l].z+"\n";a=a+"    endloop\n";a=a+"  endfacet\n"}a=a+"endsolid Test_Model"}else{var f=e.attributes.position.array;var v=e.attributes.normal.array;console.log(f);var a="solid Test_Model\n";for(var i=0;i<f.length;i=i+9){a=a+"  facet normal "+v[i]+" "+v[i+1]+" "+v[i+2]+"\n";a=a+"    outer loop\n";a=a+"      vertex "+f[i]+" "+f[i+1]+" "+f[i+2]+"\n"+"      vertex "+f[i+3]+" "+f[i+4]+" "+f[i+5]+"\n"+"      vertex "+f[i+6]+" "+f[i+7]+" "+f[i+8]+"\n";a=a+"    endloop\n";a=a+"  endfacet\n"}a=a+"endsolid Test_Model"}return a};THREE.STLTranser.prototype.trans2STLBin=function(e){if(e instanceof THREE.BufferGeometry==false&&e instanceof THREE.Geometry==false){console.error("not an instance of THREE.BufferGeometry or THREE.Geometry.",e);return}if(e.faces){var r=e.vertices;var t=e.faces;var a=t.length*50+84;var n=new ArrayBuffer(a);console.log(a);var o=new DataView(n);for(var s=0;s<80;s=s+1){o.setUint8(s,0,true)}o.setUint32(80,t.length,true);var l=84;var f=12*4+2;for(var v in t){var i=l+v*f;o.setFloat32(i,t[v].normal.x,true);o.setFloat32(i+4,t[v].normal.y,true);o.setFloat32(i+8,t[v].normal.z,true);var u=[t[v].a,t[v].b,t[v].c];for(var s=1;s<=3;s++){var c=i+s*12;o.setFloat32(c,r[u[s-1]].x,true);o.setFloat32(c+4,r[u[s-1]].y,true);o.setFloat32(c+8,r[u[s-1]].z,true)}o.setUint16(i+48,0,true)}return n}else{var m=e.attributes.position.array;var y=e.attributes.normal.array;var a=m.length/9*50+84;var n=new ArrayBuffer(a);console.log(a);var o=new DataView(n);for(var s=0;s<80;s=s+1){o.setUint8(s,0,true)}o.setUint32(80,m.length/9,true);var l=84;var f=12*4+2;for(var s=0;s<m.length;s=s+9){var i=l+s/9*f;o.setFloat32(i,y[s],true);o.setFloat32(i+4,y[s+1],true);o.setFloat32(i+8,y[s+2],true);for(var E=0;E<9;E++){var c=i+12+E*4;o.setFloat32(c,m[s+E],true)}o.setUint16(i+48,0,true)}return n}};